<!DOCTYPE html>
<html>
  <head>
    <title>ミロストル技術社ウェブサイト</title>
    <script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>
    <script>
    </script>
  </head>
  <body>
    <header>ミロストル技術社ウェブサイト/ミロストル通信ネットワーク</header>
    <h1>ミロストル簡易独立電子メール</h1>
    <p>関係者以外は閲覧をおやめください</p>
    説明<br>
    「独立」っていうのは、GmailとかYahoo!メールと違って、このサービス間でしかメールを送受信できないっていうこと。
    <address>
      連絡先<br>
      電子メール takikawatouma@gmail.com<br>
      小学校 6年3組15番
    </address>
    <script>
      // WebSocket URL
      const url = 'wss://mcn-central-whipchill496.cloud.shiftr.io';
  
      // 接続オプション
      const options = {
        clientId: 'aiueo',
        username: 'mcn-central-whipchill496',
        password: 'yLF6lCXtNQhPeJc1',
        clean: true,
        reconnectPeriod: 1000,   // 自動再接続(1秒)
        connectTimeout: 4000     // タイムアウト
      };
  
      const client = mqtt.connect(url, options);
  
      client.on('connect', () => {
        console.log('✅ 接続成功');
  
        client.subscribe('test/topic', (err) => {
          if (!err) {
            client.publish('test/topic', 'Hello from browser');
          }
        });
      });
  
      client.on('message', (topic, message) => {
        console.log('受信:', topic, message.toString());
      });
  
      client.on('error', (err) => {
        console.error('エラー:', err);
      });
    </script>
  </body>
</html>
